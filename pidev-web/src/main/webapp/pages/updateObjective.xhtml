<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:p="http://primefaces.org/ui"
	xmlns:t="http://myfaces.apache.org/tomahawk"
	template="/template/default/admin/template.xhtml">

	<ui:define name="content">

		<section class="section-container"> <!-- Page content-->
		<div class="content-wrapper">
			<div class="content-heading">
				<div>
					Update Objective <small>..</small>
				</div>
			</div>


			<!-- START card-->
			<div class="row">
				<div class="col-lg-10">
					<div class="card card-default">

						<div class="card-body">

							<h:form styleClass="form-horizontal">

								<fieldset>
									<legend>Objective details</legend>
									<div class="form-group row">
										<label class="col-md-2 col-form-label">Objective name:</label>
										<div class="col-md-3">
											<h:inputText id="nameObj" styleClass="form-control form-control-rounded"
												value="#{editObjectiveBean.objective.name}" 
												required="true"
												requiredMessage="the name field is required"/>
												<h:message for="nameObj" />
										</div>
									</div>
								</fieldset>
								
								<fieldset>
									<div class="form-group row">
										<label class="col-md-2 col-form-label">Begins At:</label>
										<div class="col-md-3">
											<input id="beginsAt" name="beginsAt"
												value="#{editObjectiveBean.objective.dateBegin}"
												class="form-control form-control-rounded" type="date" />

										</div>
									</div>
								</fieldset>

								<fieldset>
									<div class="form-group row">
										<label class="col-md-2 col-form-label">Ends At:</label>
										<div class="col-md-3">
											<input id="endsAt" name="endsAt"
												value="#{editObjectiveBean.objective.dateEnd}"
												class="form-control form-control-rounded" type="date" />

										</div>
									</div>
								</fieldset>

								<fieldset>
									<div class="form-group row">
										<label class="col-md-2 col-form-label">Objective
											category:</label>
										<div class="col-md-3">
										
											<h:selectOneMenu styleClass="custom-select custom-select-sm"
												value="#{editObjectiveBean.objective.category}">
												<f:selectItem itemValue="status" itemLabel="status" />
												<f:selectItem itemValue="salary" itemLabel="salary" />
												<f:selectItem itemValue="classifications" itemLabel="classifications" />
												<f:selectItem itemValue="level" itemLabel="level" />
												<f:selectItem itemValue="membership" itemLabel="membership" />
												
											</h:selectOneMenu>
										</div>
									</div>
								</fieldset>

								<fieldset>
									<div class="form-group row">
										<label class="col-md-2 col-form-label">Objective
											details:</label>
										<div class="col-md-3">
											<h:inputTextarea id="detailObj" styleClass="form-control"
												value="#{editObjectiveBean.objective.description}"
												required="true"
												requiredMessage="the details field is required" />
												<h:message for="detailObj" />
											
										</div>
									</div>
								</fieldset>

								<a class="text text-white btn btn-warning"
									onclick="editObjective()" href="javascript:timedRefresh(5000)">
									<i class="fa fa-fw fa-edit"></i>
								</a>

								<p:remoteCommand name="editObjectiveMethod"
									actionListener="#{editObjectiveBean.onUpdateObjective()}"
									style="display: none;" />

								<h:commandLink style="margin-left:20px"
									styleClass="text text-primary"
									action="#{editObjectiveBean.cancel()}">  cancel </h:commandLink>
							</h:form>
						</div>
					</div>
				</div>
			</div>
		</div>

		</section>


		<script type="application/javascript">
			
			
			
		 function editObjective(){
			
			 var e = jQuery.Event("click");
			
			 e.preventDefault();

			 swal({
				  title: "Are you sure?",
				  text: "Do you confirm updating this objective!",
				  icon: "warning",
				  buttons: true,
				  dangerMode: true,
				})
				.then((willDelete) => {
				  if (willDelete) {
				    swal("Objective successfully updated!", {
				      icon: "success",
				    });
				    editObjectiveMethod();
				    
				  } else {
				    
				  }
				});
			return false;
	    }
		 
		 function timedRefresh(timeoutPeriod) {
				setTimeout('location.replace("/pidev-web/pages/objectives.xhtml")',timeoutPeriod);
			}
		 

		
		</script>
	</ui:define>
</ui:composition>
